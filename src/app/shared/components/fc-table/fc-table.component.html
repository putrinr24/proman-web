<!-- For Desktop -->
<div
  class="border-tertiary-200 hidden h-full min-h-0 flex-col rounded border md:flex">
  <!-- Header -->
  <div
    class="bg-tertiary-100 border-tertiary-200 sticky top-0 z-10 grid items-center gap-6 border-b px-6 py-2 text-sm font-semibold tracking-wide text-gray-700 select-none"
    [ngStyle]="{
      'grid-template-columns': 'repeat(' + columns.length + ', minmax(0, 1fr))',
    }">
    <div *ngFor="let col of columns">{{ col.label }}</div>
  </div>

  <!-- Data List -->
  <div
    *ngIf="!loading && data.length > 0"
    class="min-h-0 flex-1 overflow-y-auto">
    <div
      *ngFor="let row of data"
      (click)="rowClick.emit(row)"
      class="hover:bg-tertiary-50 border-tertiary-200 grid cursor-pointer items-center gap-6 border-b px-6 py-3 text-sm text-black transition-colors duration-300"
      [ngStyle]="{
        'grid-template-columns':
          'repeat(' + columns.length + ', minmax(0, 1fr))',
      }">
      <ng-container *ngFor="let col of columns">
        <div class="truncate" *ngIf="!col.formatter">
          {{ row[col.field] }}
        </div>
        <div
          *ngIf="col.formatter"
          [innerHTML]="col.formatter(row[col.field], row)"></div>
      </ng-container>
    </div>
  </div>

  <div
    *ngIf="!loading && data.length === 0"
    class="flex flex-1 items-center justify-center p-6">
    <fc-not-found></fc-not-found>
  </div>

  <div *ngIf="loading" class="flex flex-1 items-center justify-center p-6">
    <fc-loading></fc-loading>
  </div>
</div>

<!-- For Mobile -->
<div class="flex flex-col space-y-3 p-0.5 @3xl:hidden">
  <ng-container *ngIf="!loading && data.length > 0">
    <div
      (click)="rowClick.emit(row)"
      *ngFor="let row of data"
      class="hover:bg-tertiary-50 cursor-pointer overflow-y-auto rounded-lg bg-white p-5 shadow-sm transition-all duration-300 hover:shadow-md"
      style="box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px">
      <!-- Title -->
      <div class="flex items-center justify-between">
        <h3 class="truncate text-sm font-semibold text-black">
          {{ getPrimaryValue ? getPrimaryValue(row) : '' }}
        </h3>
        <!-- <span
          *ngIf="getSecondaryValue && getSecondaryValue(row)"
          class="bg-tertiary-200 rounded-full px-3 py-1 text-xs font-medium text-gray-700 select-none">
          {{ getSecondaryValue(row) }}
        </span> -->
        <span
          *ngIf="getSecondaryValue && getSecondaryValue(row)"
          [ngClass]="getSecondaryClass(row)"
          class="rounded-full px-3 py-1 text-xs font-medium select-none">
          {{ getSecondaryLabel(row) }}
        </span>
      </div>

      <!-- Detail -->
      <div class="mt-3 space-y-1 text-xs text-gray-700">
        <ng-container *ngFor="let col of columns">
          <ng-container *ngIf="!isPrimaryOrSecondary(col.field)">
            <div class="flex items-start space-x-2">
              <span class="font-medium">{{ col.label }}:</span>
              <span class="truncate" *ngIf="!col.formatter">{{
                row[col.field]
              }}</span>
              <span
                *ngIf="col.formatter"
                [innerHTML]="col.formatter(row[col.field], row)"></span>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </ng-container>

  <div
    *ngIf="!loading && data.length === 0"
    class="flex flex-1 items-center justify-center p-6">
    <fc-not-found></fc-not-found>
    >
  </div>

  <div *ngIf="loading" class="flex justify-center py-6">
    <fc-loading></fc-loading>
  </div>
</div>
